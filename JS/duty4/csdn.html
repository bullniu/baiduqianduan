<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">    
    <title>IFE ECMAScript</title>
</head>
<body>            
    <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
    <button id="fade-btn">淡出</button>
    <script type="text/javascript">
        var butt=document.getElementById('fade-btn');
        var divLow=document.getElementById('fade-obj'); 
         var x=100;
        function toLow(){ 
          
      
            if(x>0){
         
            function colorToLow(){
                butt.disabled=true;//使按钮变得不可按。
              
                   
                divLow.style.opacity=x/100;
                x=x-1; 
                console.log(x);
                return x;
                }
                intervalId=setInterval(function(){colorToLow()},10);
            }
                else if(x<=0){ 
                    butt.innerText = '淡入';
                    console.log('1');
                     clearInterval(intervalId)  ;
                    butt.disabled=false;
                    butt.addEventListener('click',toUp); 
                } 
            }
            function toUp(){ 
                if(x<=100){
                intervalId2=setInterval('colorToUp()',10);
           
            function colorToUp(){
                butt.disabled=true;
               
                  divLow.style.opacity=x/100;
                x=x+1;  
                }
            }
                else if(x>100){
                    butt.innerText='淡出';
                    clearInterval(intervalId2);
                    butt.disabled=false;
                    butt.addEventListener('click',toLow);
                    console.log(x);
                }
            }
            //window.clearInterval('id'); 

        butt.addEventListener('click',toLow);
    </script>
</body>
</html>